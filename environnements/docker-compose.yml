services:
  # frontend_react:
  #   container_name: frontend_react
  #   build:
  #     context: ./FrontEnd
  #   volumes:
  #     - ./FrontEnd:/usr/src/app
  #   ports:
  #     - 5173:5173
  #   networks:
  #     - reseauApplication

  microservice_authentification:
    container_name: microservice_authentification
    build:
      context: ../backend/src/modules/authentification
    volumes:
      - ../backend/src/modules/authentification:/usr/src/app
    ports:
      - 3001:3001
    networks:
      - reseauApplication
    command: ["sh", "./install.sh"]

  microservice_role:
    container_name: microservice_role 
    build:
      context: ../backend/src/modules/roles
    volumes:
      - ../backend/src/modules/roles:/usr/src/app
    ports:
      - 3002:3002
    networks:
      - reseauApplication
    command: ["sh", "./install.sh"]

  microservice_user:
    container_name: microservice_user 
    build:
      context: ../backend/src/modules/users
    volumes:
      - ../backend/src/modules/users:/usr/src/app
    ports:
      - 3003:3003
    networks:
      - reseauApplication
    command: ["sh", "./install.sh"]

  nginx:
    container_name: nginx-container
    image: nginx:latest
    ports:
      - "5000:5000"
    volumes:
      - ./conf.d:/etc/nginx/conf.d
    networks:
      - reseauApplication
    depends_on:
      - microservice_user 
      - microservice_role 
      - microservice_authentification

networks:
  reseauApplication:
    driver: bridge
    external: true
